<template>    <div class="login" ref="login">        <!--        //一个根元素-->        <div class="login-container">            <div class="login-con">                <h1>后台登录</h1>                <el-form :model="loginForm" label-width="80px" ref="loginform" :rules="rules">                    <el-form-item label="用户名:" prop="username">                        <el-input v-model="loginForm.username" placeholder="请输入账号" clearable></el-input>                    </el-form-item>                    <el-form-item label="密   码:" prop="password">                        <el-input v-model="loginForm.password" placeholder="请输入密码" show-password clearable></el-input>                    </el-form-item>                    <div class="btn-con">                        <el-button type="primary" @click="handleLogin('loginform')">登录</el-button>                    </div>                </el-form>            </div>        </div>    </div></template><script>    import axios from 'axios';    import {SUCCESS, URL, FAIL} from "@/lib/base";    /*    * 1.表单验证    * 2.路由前置守卫    * 3.路由元信息    * 4.登陆成功后返回之前页面 地址栏添加查询字符串    * */    export default {        name: "Login",        data() {            return {                loginForm: {                    username: '',                    password: ''                },                //1.data  rules 规则 2.   form :rules 3.el-form-item prop                rules: {                    username: [                        {required: true, message: '请输入用户名', trigger: "blur"},                        {min: 5, message: '长度至少五个字符', trigger: 'blur'}                    ],                    password: [                        {required: true, message: '请输入密码', trigger: "blur"}                    ]                }            };        },        methods: {            handleLogin(Form) {                //console.log(this.$refs);                this.$refs[Form].validate(result => {                    if (result) {                        FAIL;                        //验证成功                        //发送请求 是对象                        //请求地址                        //一、前端代理  二、服务器端：允许跨域访问 三、jsonp                        // 同源协议  协议 域名 端口号                        //let that = this;                        //let url = 'http://localhost:81/hotel-admin/public/index.php';                        axios.post(URL + '/admin/Login/check', this.loginForm).then((res) => {                            //console.log(res)                            //console.log("resdsd"+this)                            if (res.status === 200 && res.data.code === SUCCESS) {                                //是否登录 判断有无token 没登陆不可以进入其他路由 vue->导航守卫                                sessionStorage.setItem('token', res.data.token);                                let redirect = this.$route.query.redirect || 'index';                                this.$router.push({name: redirect, query: {username: this.loginForm.username}});                            } else {                                console.log(res);                                this.$message.error(res.data.msg);                            }                        }).catch(function (error) {                            console.log(error);                        })                        //console.log(result);                        //console.log(this.$route);                        //console.log(this.$router);                    }                })                // console.log(this.loginForm);            }        }    }</script><style>    /*对组件外的起作用(不加 scoped )*/</style><!--scoped  对当前组件元素起作用  lang="sass"--><style scoped>    .login-container{        width: 470px;        height: 280px;        padding: 10px 10px 10px 10px;        background: rgba(0,0,0,0.5);        position: absolute;        box-sizing: border-box;        top: 50%;        left: 50%;        transform: translate(-50%, -50%);        border-radius: 8px;    }    .login {        position: absolute;        top: 0;        left: 0;        bottom: 0;        right: 0;        background: url("../img/back2.jpg") no-repeat;        background-size: auto 100%;        background-position: 55%;    }    .login-con {        width: 450px;        height: auto;        min-height: 250px;        /*padding-top: 30px;*/        padding-bottom: 10px;        border-radius: 8px;        box-shadow: 0 0 5px gray;        position: absolute;        top: 50%;        left: 50%;        transform: translate(-50%, -50%);        text-align: center;        overflow: hidden;        animation: myfirst 1.5s ease-in-out 0ms;        -webkit-animation: myfirst 1.5s ease-in-out 0ms;        -o-animation: myfirst 1.5s ease-in-out 0ms;        -moz-animation: myfirst 1.5s ease-in-out 0ms;        background-color: white;    }    .login-con > h1 {        margin-left: 5%;        height: 50px;        width: 90%;        font-size: 24px;        line-height: 50px;        border-bottom: 2px solid #409eff;        color: black;        text-align: center;    }    .login-con form {        margin-right: 20px;        margin-top: 20px;    }    @keyframes myfirst {        from {            opacity: 0;        }        to {            opacity: 1;        }    }    @-moz-keyframes myfirst {        from {            opacity: 0;        }        to {            opacity: 1;        }    }    @-webkit-keyframes myfirst {        from {            opacity: 0;        }        to {            opacity: 1;        }    }    @-o-keyframes myfirst {        from {            opacity: 0;        }        to {            opacity: 1;        }    }</style>