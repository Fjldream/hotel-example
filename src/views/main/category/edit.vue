<template>    <div class="cat-con">        <div class="page-header-con">        <el-page-header @back="goBack" content="编辑分类">        </el-page-header>        </div>        <el-form :model="category" :rules="rules" ref="category">            <el-form-item label="分类名称" prop="cname">                <el-input v-model="category.cname" clearable></el-input>            </el-form-item>            <el-form-item label="分类描述" prop="cdesc">                <el-input v-model="category.cdesc" clearable></el-input>            </el-form-item>            <div class="btn-con">                <el-button type="warning" plain @click="editCategory">修改</el-button>            </div>        </el-form>    </div></template><script>    import {URL,SUCCESS} from "../../../lib/base";    export default {        name: "edit",        data(){            let validateCname = (rule, value, callback) => {                if (value === "") {                    callback(new Error("分类名称必填"));                } else if (!/[a-z0-9A-Z\u4e00-\u9fa5]{2,}/.test(value)) {                        callback(new Error("必须输入汉字字母数字2-8位"));                } else {                    callback();                }            };            return {                category:{                    cid:'',                    cname:'',                    cdesc:''                },                rules: {                    cname: [                        {required: true, message: "分类名称必填", trigger: "blur"},                        {validator: validateCname, trigger: ""},                        {max:8,message:'必须输入汉字字母数字2-8位',trigger: 'blur'}                    ],                    cdesc: [                        {required: true, message: "分类描述必填", trigger: "blur"},                        {min: 3, max: 30, message: "长度在3到30位之间", trigger: "blur"}                        ]                }            }        },        methods:{            initPage(){                console.log(this.$route.query.cid);                this.category.cid = this.$route.query.cid;                this.category.cname = this.$route.query.cname;                this.category.cdesc = this.$route.query.cdesc;            },            editCategory(){                SUCCESS;                this.$refs.category.validate(result=>{                    if (result){                        let url = URL+'/admin/Category/editCategory';                        let token = sessionStorage.getItem('token');                        this.$http({                            url,                            method:'POST',                            data:this.category,                            headers:{                                token                            }                        }).then(res=>{                            if(res.status===200&&res.data.code===SUCCESS){                                this.$message.success(res.data.msg);                                this.$router.push('/showCategory');                            }else{                                this.$message.error(res.data.msg);                            }                        }).catch(()=>{                        })                    }                })            },            goBack(){                this.$router.push({name:'showcategory'});            }        },        mounted() {            this.initPage();        }    }</script><style scoped>    .cat-con {        padding: 30px 300px;    }    .btn-con{        width: 100%;        text-align: center ;    }    .page-header-con{        position:fixed;        top: 80px;        left: 240px;        color: dodgerblue;    }</style>