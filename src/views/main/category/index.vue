<template>    <div class="show-con">        <el-breadcrumb separator-class="el-icon-arrow-right">            <el-breadcrumb-item :to="{ path: '/' }">首页</el-breadcrumb-item>            <el-breadcrumb-item>分类管理</el-breadcrumb-item>            <el-breadcrumb-item :to="{ path: '/showCategory' }">查看分类</el-breadcrumb-item>        </el-breadcrumb>        <div class="table-con">            <el-form :inline="true">                <el-form-item label="分类名称">                    <el-input v-model="search.cname"></el-input>                </el-form-item>                <el-button type="primary" @click="searchCategory">查询</el-button>            </el-form>            <el-table :data="categories"                      border v-loading="loading"                      element-loading-text="拼死加载中"                      element-loading-spinner="el-icon-loading"            >                <el-table-column prop="cid" label="ID" width="80px" align="center"></el-table-column>                <el-table-column prop="cname" label="分类名称"></el-table-column>                <el-table-column prop="cdesc" label="分类描述"></el-table-column>                <el-table-column label="操作" align="center">                    <!--                scope-->                    <template slot-scope="scope">                        <!--                    或者 router-link跳转  跳转的时候传值-->                        <!--                    <router-link :to="{path:'/editcategory',query:{cid:scope.row.cid}}"></router-link>-->                        <el-button plain type="primary" @click="editCategory(scope.row)">编辑</el-button>                        <el-button plain type="danger" @click="delCategory(scope.row)">删除</el-button>                    </template>                </el-table-column>            </el-table>            <div class="paginate">                <el-pagination                        background                        :total="total"                        :page-size.sync="paginate.limit"                        :current-page.sync="paginate.page"                        layout="total, prev, pager, next, jumper"                        @current-change="handleCurrentChange"                >                    <!--        @current-change事件 点击按钮-->                </el-pagination>            </div>        </div>    </div></template><script>    import axios from 'axios';    import {URL, SUCCESS} from "../../../lib/base";    import instance from "../../../http/http";    export default {        name: "index",        data() {            return {                // 搜索条件                search: {cname: ''},                //分页                paginate: {                    page: 1,                    limit: 8                },                categories: [],                total: 0,                delete: {                    cid: ''                },                loading: false            }        },        methods: {            //页面一打开就调用函数，放在生命函数            // initCategory(){            //     this.loading = true;            //     let url = URL + "/admin/Category/showCategory";            //     //console.log(url);            //     let token = sessionStorage.getItem("token");            //      //合并            //     let params =Object.assign({},this.paginate,this.search);            //     //console.log(params);            //     axios({            //         url,            //         method:'POST',            //         data:params,            //         headers:{            //             token            //         }            //     }).then(res=>{            //        // console.log(res.data);            //         if(res.status===200&&res.data.code===SUCCESS){            //             if(res.data.data){            //                 this.$message.success(res.data.msg);            //                 this.categories = res.data.data;            //                 this.total = res.data.total;            //                 setTimeout( ()=>{            //                     this.loading = false;            //                 },200)            //            //             }            //         }            //     }).then(()=>{            //         //console.log(error);            //     })            // },            initCategory() {                this.loading = true;                let params =Object.assign({},this.paginate,this.search);                instance.post('/admin/Category/showCategory',params).then(res => {                   // console.log(res);                    if (res.code === SUCCESS) {                        this.categories = res.data;                        this.$message.success(res.msg);                        this.total = res.total;                         setTimeout( ()=>{                        this.loading = false;                                         },200)                    } else {                        this.$message.error(res.msg);                        this.loading = false;                    }                }).catch(() => {                })            },            handleCurrentChange(val) {                this.paginate.page = val;                this.initCategory();            },            searchCategory() {                this.paginate.page = 1;                this.initCategory();            },            delCategory(row) {                //console.log(row['cid']);                this.delete.cid = row['cid'];                let url = URL + '/admin/Category/delCategory';                let token = sessionStorage.getItem("token");                axios({                    url,                    method: 'POST',                    headers: {                        token                    },                    data: this.delete                }).then(res => {                    // console.log(res);                    if (res.status === 200 && res.data.code === SUCCESS) {                        this.$message.success(res.data.msg);                        this.initCategory();                    } else {                        this.$message.error(res.data.msg);                    }                }).catch(() => {                })            },            /*            * 1.编辑是哪条数据 query            * */            editCategory(row) {                //console.log(row);                let cid = row.cid;                let cname = row.cname;                let cdesc = row.cdesc;                //脚本跳转 传值                this.$router.push({path: '/editcategory', query: {cid, cname, cdesc}})            }        },        //不要在声明周期函数或回调上使用箭头函数        mounted() {            this.initCategory();        }    }</script><style>    html{        scroll-behavior: smooth;    }</style><style scoped>    .show-con {        padding: 40px 150px;        height: 100%;        box-sizing: border-box;        background-color: #F5FAFF;    }    /*.el-table{*/    /*    border: 1px solid black;*/    /*}*/    /*.el-table td{*/    /*    border: 1px solid black;*/    /*}*/    .paginate {        width: 100%;        height: auto;        text-align: center;        margin-top: 15px;    }    .table-con {        height:auto;        padding: 10px;        background-color: white;        /*//position: relative;*/        border-radius: 3px;        border-top: none;        border: 1px solid #f5f5f5;        box-shadow: 3px 2px 5px 2px #e4e3e3;        border-bottom-left-radius: 7px;        border-bottom-right-radius: 7px;        color: #828282;        box-sizing: border-box;        margin-top: 20px;        margin-bottom: 60px;        /*animation: myfirst 1.5s ease-in-out 0ms ;*/        /*-webkit-animation: myfirst 1.5s ease-in-out 0ms;*/        /*-o-animation: myfirst 1.5s ease-in-out 0ms ;*/        /*-moz-animation:  myfirst 1.5s ease-in-out 0ms;*/    }    /*.paginate {*/    /*    position: absolute;*/    /*    bottom: 5px;*/    /*}*/</style>